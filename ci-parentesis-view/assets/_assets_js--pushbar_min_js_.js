class Pushbar{constructor(a={overlay:!0,blur:!1}){if(this.activeId,this.activeElement,this.overlayElement,a.overlay&&(this.overlayElement=document.createElement("div"),this.overlayElement.classList.add("pushbar_overlay"),document.querySelector("body").appendChild(this.overlayElement)),a.blur){let b=document.querySelector(".pushbar_main_content");b&&b.classList.add("pushbar_blur")}this.bindEvents()}emitOpening(){let a=new CustomEvent("pushbar_opening",{bubbles:!0,detail:{element:this.activeElement,id:this.activeId}});this.activeElement.dispatchEvent(a)}emitClosing(){let a=new CustomEvent("pushbar_closing",{bubbles:!0,detail:{element:this.activeElement,id:this.activeId}});this.activeElement.dispatchEvent(a)}handleOpenEvent(a){a.preventDefault();let b=a.currentTarget.getAttribute("data-pushbar-target");this.open(b)}handleCloseEvent(a){a.preventDefault(),this.close()}handleKeyEvent(a){27===a.keyCode&&this.close()}bindEvents(){let a=document.querySelectorAll("[data-pushbar-target]"),b=document.querySelectorAll("[data-pushbar-close]");a.forEach(a=>a.addEventListener("click",a=>this.handleOpenEvent(a),!1)),b.forEach(a=>a.addEventListener("click",a=>this.handleCloseEvent(a),!1)),this.overlayElement&&this.overlayElement.addEventListener("click",a=>this.handleCloseEvent(a),!1),document.addEventListener("keyup",a=>this.handleKeyEvent(a))}open(a){if(this.activeId===String(a)||!a||(this.activeId&&this.activeId!==String(a)&&this.close(),this.activeId=a,this.activeElement=document.querySelector(`[data-pushbar-id="${this.activeId}"]`),!this.activeElement))return;this.emitOpening(),this.activeElement.classList.add("opened");let b=document.querySelector("html");b.classList.add("pushbar_locked"),b.setAttribute("pushbar",a)}close(){if(!this.activeId)return;this.emitClosing(),this.activeElement.classList.remove("opened");let a=document.querySelector("html");a.classList.remove("pushbar_locked"),a.removeAttribute("pushbar"),this.activeId=null,this.activeElement=null}}